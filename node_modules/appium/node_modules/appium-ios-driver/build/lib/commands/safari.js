'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _Object$assign = require('babel-runtime/core-js/object/assign')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

Object.defineProperty(exports, '__esModule', {
  value: true
});

var _logger = require('../logger');

var _logger2 = _interopRequireDefault(_logger);

var commands = {},
    helpers = {},
    extensions = {};

var SAFARI_BUNDLE = 'com.apple.mobilesafari';

// once safariLauncher is running and instrumented, this function
// finds the button which launches safari and clicks it.
extensions.clickButtonToLaunchSafari = function callee$0$0() {
  var el, msg;
  return _regeneratorRuntime.async(function callee$0$0$(context$1$0) {
    while (1) switch (context$1$0.prev = context$1$0.next) {
      case 0:
        _logger2['default'].debug('Attempting to launch Safari from Safari Launcher');
        el = undefined;
        context$1$0.prev = 2;
        context$1$0.next = 5;
        return _regeneratorRuntime.awrap(this.findElement('accessibility id', 'launch safari'));

      case 5:
        el = context$1$0.sent;
        context$1$0.next = 12;
        break;

      case 8:
        context$1$0.prev = 8;
        context$1$0.t0 = context$1$0['catch'](2);
        msg = 'Could not find button to launch Safari. ' + 'Make sure you are using the latest version of ' + 'SafariLauncher that appium is using';

        _logger2['default'].errorAndThrow(msg);

      case 12:
        context$1$0.prev = 12;
        context$1$0.next = 15;
        return _regeneratorRuntime.awrap(this.click(el.ELEMENT));

      case 15:
        context$1$0.next = 21;
        break;

      case 17:
        context$1$0.prev = 17;
        context$1$0.t1 = context$1$0['catch'](12);
        msg = 'Unable to click the \'launch safari\' button of SafariLauncher: ' + context$1$0.t1.message;

        _logger2['default'].errorAndThrow(msg);

      case 21:

        _logger2['default'].debug('Clicked button, safari should be launching.');

      case 22:
      case 'end':
        return context$1$0.stop();
    }
  }, null, this, [[2, 8], [12, 17]]);
};

_Object$assign(extensions, commands, helpers);
exports.commands = commands;
exports.helpers = helpers;
exports.SAFARI_BUNDLE = SAFARI_BUNDLE;
exports['default'] = extensions;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9jb21tYW5kcy9zYWZhcmkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O3NCQUFtQixXQUFXOzs7O0FBRzlCLElBQUksUUFBUSxHQUFHLEVBQUU7SUFBRSxPQUFPLEdBQUcsRUFBRTtJQUFFLFVBQVUsR0FBRyxFQUFFLENBQUM7O0FBRWpELElBQU0sYUFBYSxHQUFHLHdCQUF3QixDQUFDOzs7O0FBSS9DLFVBQVUsQ0FBQyx5QkFBeUIsR0FBRztNQUVqQyxFQUFFLEVBYUEsR0FBRzs7OztBQWRULDRCQUFPLEtBQUssQ0FBQyxrREFBa0QsQ0FBQyxDQUFDO0FBQzdELFVBQUU7Ozt5Q0FFTyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixFQUFFLGVBQWUsQ0FBQzs7O0FBQWhFLFVBQUU7Ozs7Ozs7QUFFRSxXQUFHLEdBQUcsMENBQTBDLEdBQzFDLGdEQUFnRCxHQUNoRCxxQ0FBcUM7O0FBQy9DLDRCQUFPLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQzs7Ozs7eUNBSXBCLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7O0FBRXhCLFdBQUcsd0VBQW9FLGVBQUksT0FBTzs7QUFDdEYsNEJBQU8sYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDOzs7O0FBRzVCLDRCQUFPLEtBQUssQ0FBQyw2Q0FBNkMsQ0FBQyxDQUFDOzs7Ozs7O0NBQzdELENBQUM7O0FBR0YsZUFBYyxVQUFVLEVBQUUsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3BDLFFBQVEsR0FBUixRQUFRO1FBQUUsT0FBTyxHQUFQLE9BQU87UUFBRSxhQUFhLEdBQWIsYUFBYTtxQkFDMUIsVUFBVSIsImZpbGUiOiJsaWIvY29tbWFuZHMvc2FmYXJpLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxvZ2dlciBmcm9tICcuLi9sb2dnZXInO1xuXG5cbmxldCBjb21tYW5kcyA9IHt9LCBoZWxwZXJzID0ge30sIGV4dGVuc2lvbnMgPSB7fTtcblxuY29uc3QgU0FGQVJJX0JVTkRMRSA9ICdjb20uYXBwbGUubW9iaWxlc2FmYXJpJztcblxuLy8gb25jZSBzYWZhcmlMYXVuY2hlciBpcyBydW5uaW5nIGFuZCBpbnN0cnVtZW50ZWQsIHRoaXMgZnVuY3Rpb25cbi8vIGZpbmRzIHRoZSBidXR0b24gd2hpY2ggbGF1bmNoZXMgc2FmYXJpIGFuZCBjbGlja3MgaXQuXG5leHRlbnNpb25zLmNsaWNrQnV0dG9uVG9MYXVuY2hTYWZhcmkgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIGxvZ2dlci5kZWJ1ZygnQXR0ZW1wdGluZyB0byBsYXVuY2ggU2FmYXJpIGZyb20gU2FmYXJpIExhdW5jaGVyJyk7XG4gIGxldCBlbDtcbiAgdHJ5IHtcbiAgICBlbCA9IGF3YWl0IHRoaXMuZmluZEVsZW1lbnQoJ2FjY2Vzc2liaWxpdHkgaWQnLCAnbGF1bmNoIHNhZmFyaScpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBsZXQgbXNnID0gJ0NvdWxkIG5vdCBmaW5kIGJ1dHRvbiB0byBsYXVuY2ggU2FmYXJpLiAnICtcbiAgICAgICAgICAgICAgJ01ha2Ugc3VyZSB5b3UgYXJlIHVzaW5nIHRoZSBsYXRlc3QgdmVyc2lvbiBvZiAnICtcbiAgICAgICAgICAgICAgJ1NhZmFyaUxhdW5jaGVyIHRoYXQgYXBwaXVtIGlzIHVzaW5nJztcbiAgICBsb2dnZXIuZXJyb3JBbmRUaHJvdyhtc2cpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBhd2FpdCB0aGlzLmNsaWNrKGVsLkVMRU1FTlQpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBsZXQgbXNnID0gYFVuYWJsZSB0byBjbGljayB0aGUgJ2xhdW5jaCBzYWZhcmknIGJ1dHRvbiBvZiBTYWZhcmlMYXVuY2hlcjogJHtlcnIubWVzc2FnZX1gO1xuICAgIGxvZ2dlci5lcnJvckFuZFRocm93KG1zZyk7XG4gIH1cblxuICBsb2dnZXIuZGVidWcoJ0NsaWNrZWQgYnV0dG9uLCBzYWZhcmkgc2hvdWxkIGJlIGxhdW5jaGluZy4nKTtcbn07XG5cblxuT2JqZWN0LmFzc2lnbihleHRlbnNpb25zLCBjb21tYW5kcywgaGVscGVycyk7XG5leHBvcnQgeyBjb21tYW5kcywgaGVscGVycywgU0FGQVJJX0JVTkRMRSB9O1xuZXhwb3J0IGRlZmF1bHQgZXh0ZW5zaW9ucztcbiJdLCJzb3VyY2VSb290IjoiLi4vLi4vLi4ifQ==
