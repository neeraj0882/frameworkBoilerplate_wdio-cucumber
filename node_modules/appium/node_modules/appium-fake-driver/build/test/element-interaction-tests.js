'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

Object.defineProperty(exports, '__esModule', {
  value: true
});

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _helpers = require('./helpers');

var should = _chai2['default'].should();

function elementTests() {
  describe('element interaction and introspection', function () {
    var driver = undefined;
    before(function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap((0, _helpers.initSession)(_helpers.DEFAULT_CAPS));

          case 2:
            driver = context$3$0.sent;

          case 3:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    after(function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap((0, _helpers.deleteSession)());

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });

    it('should not send keys to an invalid element', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.elementByXPath('//MockListItem').sendKeys("test value").should.eventually.be.rejectedWith(/12/));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should send keys to an element and retrieve text', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.elementByXPath('//MockInputField'));

          case 2:
            el = context$3$0.sent;
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(el.sendKeys("test value"));

          case 5:
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(el.text());

          case 7:
            context$3$0.sent.should.eql("test value");

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should not clear an invalid element', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.elementByXPath('//MockListItem').clear().should.eventually.be.rejectedWith(/12/));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should clear an element', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            el = driver.elementByXPath('//MockInputField');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(el.text());

          case 3:
            context$3$0.sent.should.not.eql('');
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(el.clear());

          case 6:
            context$3$0.next = 8;
            return _regeneratorRuntime.awrap(el.text());

          case 8:
            context$3$0.sent.should.eql('');

          case 9:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should not click an invisible element', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.elementById('Button1').click().should.eventually.be.rejectedWith(/12/));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should click an element and get its attributes', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            el = driver.elementById('Button2');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(el.click());

          case 3:
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(el.click());

          case 5:
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(el.click());

          case 7:
            context$3$0.next = 9;
            return _regeneratorRuntime.awrap(el.getAttribute('clicks'));

          case 9:
            context$3$0.sent.should.equal(3);

          case 10:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should get the name of an element', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.elementByClassName('MockInputField'));

          case 2:
            el = context$3$0.sent;
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(el.getTagName());

          case 5:
            context$3$0.sent.should.equal('MockInputField');
            context$3$0.next = 8;
            return _regeneratorRuntime.awrap(driver.elementById('wv'));

          case 8:
            el = context$3$0.sent;
            context$3$0.next = 11;
            return _regeneratorRuntime.awrap(el.getTagName());

          case 11:
            context$3$0.sent.should.equal('MockWebView');

          case 12:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should detect whether an element is displayed', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            el = driver.elementById('Button1');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(el.isDisplayed());

          case 3:
            context$3$0.sent.should.equal(false);

            el = driver.elementById('Button2');
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(el.isDisplayed());

          case 7:
            context$3$0.sent.should.equal(true);

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should detect whether an element is enabled', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            el = driver.elementById('Button1');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(el.isEnabled());

          case 3:
            context$3$0.sent.should.equal(false);

            el = driver.elementById('Button2');
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(el.isEnabled());

          case 7:
            context$3$0.sent.should.equal(true);

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should detect whether an element is selected', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            el = driver.elementById('Button1');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(el.isSelected());

          case 3:
            context$3$0.sent.should.equal(false);

            el = driver.elementById('Button2');
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(el.isSelected());

          case 7:
            context$3$0.sent.should.equal(true);

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should get the location on screen of an element', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            el = driver.elementById('nav');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(el.getLocation());

          case 3:
            context$3$0.t0 = { x: 1, y: 1 };
            context$3$0.sent.should.eql(context$3$0.t0);

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should get the location on screen of an element with float vals', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            el = driver.elementById('lv');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(el.getLocation());

          case 3:
            context$3$0.t0 = { x: 20.8, y: 15.3 };
            context$3$0.sent.should.eql(context$3$0.t0);

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should get the location in view of an element', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            el = driver.elementById('nav');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(el.getLocationInView());

          case 3:
            context$3$0.t0 = { x: 1, y: 1 };
            context$3$0.sent.should.eql(context$3$0.t0);

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should get the location in view of an element with float vals', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            el = driver.elementById('lv');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(el.getLocationInView());

          case 3:
            context$3$0.t0 = { x: 20.8, y: 15.3 };
            context$3$0.sent.should.eql(context$3$0.t0);

          case 5:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });

    it('should get the size of an element', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.elementById('nav'));

          case 2:
            el = context$3$0.sent;
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(el.getSize());

          case 5:
            context$3$0.t0 = { width: 100, height: 100 };
            context$3$0.sent.should.eql(context$3$0.t0);

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should get the size of an element with float vals', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.elementById('wv'));

          case 2:
            el = context$3$0.sent;
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(el.getSize());

          case 5:
            context$3$0.t0 = { width: 20.8, height: 20.5 };
            context$3$0.sent.should.eql(context$3$0.t0);

          case 7:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should determine element equality', function callee$2$0() {
      var el1, el2;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.elementById('wv'));

          case 2:
            el1 = context$3$0.sent;
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.elementById('wv'));

          case 5:
            el2 = context$3$0.sent;
            context$3$0.next = 8;
            return _regeneratorRuntime.awrap(el1.equals(el2));

          case 8:
            context$3$0.sent.should.equal(true);

          case 9:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should determine element inequality', function callee$2$0() {
      var el1, el2;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.elementById('wv'));

          case 2:
            el1 = context$3$0.sent;
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.elementById('lv'));

          case 5:
            el2 = context$3$0.sent;
            context$3$0.next = 8;
            return _regeneratorRuntime.awrap(el1.equals(el2));

          case 8:
            context$3$0.sent.should.equal(false);

          case 9:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });

    it('should not get the css property of an element when not in a webview', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.elementById('Button1').getComputedCss('height').should.eventually.be.rejectedWith(/36/));

          case 2:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should get the css property of an element when in a webview', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.context('WEBVIEW_1'));

          case 2:
            context$3$0.next = 4;
            return _regeneratorRuntime.awrap(driver.elementByTagName('body'));

          case 4:
            el = context$3$0.sent;
            context$3$0.next = 7;
            return _regeneratorRuntime.awrap(el.getComputedCss('background-color'));

          case 7:
            context$3$0.sent.should.equal('#000');

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
    it('should return null for an unspecified css property', function callee$2$0() {
      var el;
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            context$3$0.next = 2;
            return _regeneratorRuntime.awrap(driver.elementByTagName('body'));

          case 2:
            el = context$3$0.sent;
            context$3$0.t0 = should;
            context$3$0.next = 6;
            return _regeneratorRuntime.awrap(el.getComputedCss('font-size'));

          case 6:
            context$3$0.t1 = context$3$0.sent;
            context$3$0.t0.equal.call(context$3$0.t0, context$3$0.t1, null);

          case 8:
          case 'end':
            return context$3$0.stop();
        }
      }, null, this);
    });
  });
}

exports['default'] = elementTests;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvZWxlbWVudC1pbnRlcmFjdGlvbi10ZXN0cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O29CQUFpQixNQUFNOzs7O3VCQUNrQyxXQUFXOztBQUVwRSxJQUFNLE1BQU0sR0FBRyxrQkFBSyxNQUFNLEVBQUUsQ0FBQzs7QUFFN0IsU0FBUyxZQUFZLEdBQUk7QUFDdkIsVUFBUSxDQUFDLHVDQUF1QyxFQUFFLFlBQVk7QUFDNUQsUUFBSSxNQUFNLFlBQUEsQ0FBQztBQUNYLFVBQU0sQ0FBRTs7Ozs7NkNBQ1MsZ0RBQXlCOzs7QUFBeEMsa0JBQU07Ozs7Ozs7S0FDUCxDQUFDLENBQUM7QUFDSCxTQUFLLENBQUM7Ozs7OzZDQUNFLDZCQUFlOzs7Ozs7O0tBQ3RCLENBQUMsQ0FBQzs7QUFFSCxNQUFFLENBQUMsNENBQTRDLEVBQUU7Ozs7OzZDQUN6QyxNQUFNLENBQUMsY0FBYyxDQUFDLGdCQUFnQixDQUFDLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUMzRCxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDOzs7Ozs7O0tBQ2pELENBQUMsQ0FBQztBQUNILE1BQUUsQ0FBQyxrREFBa0QsRUFBRTtVQUNqRCxFQUFFOzs7Ozs2Q0FBUyxNQUFNLENBQUMsY0FBYyxDQUFDLGtCQUFrQixDQUFDOzs7QUFBcEQsY0FBRTs7NkNBQ0EsRUFBRSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUM7Ozs7NkNBQ3hCLEVBQUUsQ0FBQyxJQUFJLEVBQUU7Ozs2QkFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLFlBQVk7Ozs7Ozs7S0FDMUMsQ0FBQyxDQUFDO0FBQ0gsTUFBRSxDQUFDLHFDQUFxQyxFQUFFOzs7Ozs2Q0FDbEMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUM1QyxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDOzs7Ozs7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S0FDM0MsQ0FBQyxDQUFDOztBQUVILE1BQUUsQ0FBQyxxRUFBcUUsRUFBRTs7Ozs7NkNBQ2xFLE1BQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUNuRCxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDOzs7Ozs7O0tBQ2pELENBQUMsQ0FBQztBQUNILE1BQUUsQ0FBQyw2REFBNkQsRUFBRTtVQUU1RCxFQUFFOzs7Ozs2Q0FEQSxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQzs7Ozs2Q0FDbEIsTUFBTSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQzs7O0FBQTFDLGNBQUU7OzZDQUNDLEVBQUUsQ0FBQyxjQUFjLENBQUMsa0JBQWtCLENBQUM7Ozs2QkFBRSxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU07Ozs7Ozs7S0FDbEUsQ0FBQyxDQUFDO0FBQ0gsTUFBRSxDQUFDLG9EQUFvRCxFQUFFO1VBQ25ELEVBQUU7Ozs7OzZDQUFTLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUM7OztBQUExQyxjQUFFOzZCQUNOLE1BQU07OzZDQUFhLEVBQUUsQ0FBQyxjQUFjLENBQUMsV0FBVyxDQUFDOzs7OzJCQUExQyxLQUFLLHNDQUF1QyxJQUFJOzs7Ozs7O0tBQ3hELENBQUMsQ0FBQztHQUNKLENBQUMsQ0FBQztDQUNKOztxQkFFYyxZQUFZIiwiZmlsZSI6InRlc3QvZWxlbWVudC1pbnRlcmFjdGlvbi10ZXN0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjaGFpIGZyb20gJ2NoYWknO1xuaW1wb3J0IHsgaW5pdFNlc3Npb24sIGRlbGV0ZVNlc3Npb24sIERFRkFVTFRfQ0FQUyB9IGZyb20gJy4vaGVscGVycyc7XG5cbmNvbnN0IHNob3VsZCA9IGNoYWkuc2hvdWxkKCk7XG5cbmZ1bmN0aW9uIGVsZW1lbnRUZXN0cyAoKSB7XG4gIGRlc2NyaWJlKCdlbGVtZW50IGludGVyYWN0aW9uIGFuZCBpbnRyb3NwZWN0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgIGxldCBkcml2ZXI7XG4gICAgYmVmb3JlIChhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBkcml2ZXIgPSBhd2FpdCBpbml0U2Vzc2lvbihERUZBVUxUX0NBUFMpO1xuICAgIH0pO1xuICAgIGFmdGVyKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGF3YWl0IGRlbGV0ZVNlc3Npb24oKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IHNlbmQga2V5cyB0byBhbiBpbnZhbGlkIGVsZW1lbnQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBhd2FpdCBkcml2ZXIuZWxlbWVudEJ5WFBhdGgoJy8vTW9ja0xpc3RJdGVtJykuc2VuZEtleXMoXCJ0ZXN0IHZhbHVlXCIpXG4gICAgICAgICAgICAgIC5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoLzEyLyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBzZW5kIGtleXMgdG8gYW4gZWxlbWVudCBhbmQgcmV0cmlldmUgdGV4dCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBlbCA9IGF3YWl0IGRyaXZlci5lbGVtZW50QnlYUGF0aCgnLy9Nb2NrSW5wdXRGaWVsZCcpO1xuICAgICAgYXdhaXQgZWwuc2VuZEtleXMoXCJ0ZXN0IHZhbHVlXCIpO1xuICAgICAgKGF3YWl0IGVsLnRleHQoKSkuc2hvdWxkLmVxbChcInRlc3QgdmFsdWVcIik7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBub3QgY2xlYXIgYW4gaW52YWxpZCBlbGVtZW50JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgYXdhaXQgZHJpdmVyLmVsZW1lbnRCeVhQYXRoKCcvL01vY2tMaXN0SXRlbScpLmNsZWFyKClcbiAgICAgICAgICAgICAgLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aCgvMTIvKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGNsZWFyIGFuIGVsZW1lbnQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgZWwgPSBkcml2ZXIuZWxlbWVudEJ5WFBhdGgoJy8vTW9ja0lucHV0RmllbGQnKTtcbiAgICAgIChhd2FpdCBlbC50ZXh0KCkpLnNob3VsZC5ub3QuZXFsKCcnKTtcbiAgICAgIGF3YWl0IGVsLmNsZWFyKCk7XG4gICAgICAoYXdhaXQgZWwudGV4dCgpKS5zaG91bGQuZXFsKCcnKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIG5vdCBjbGljayBhbiBpbnZpc2libGUgZWxlbWVudCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGF3YWl0IGRyaXZlci5lbGVtZW50QnlJZCgnQnV0dG9uMScpLmNsaWNrKClcbiAgICAgICAgICAgICAgLnNob3VsZC5ldmVudHVhbGx5LmJlLnJlamVjdGVkV2l0aCgvMTIvKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGNsaWNrIGFuIGVsZW1lbnQgYW5kIGdldCBpdHMgYXR0cmlidXRlcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBlbCA9IGRyaXZlci5lbGVtZW50QnlJZCgnQnV0dG9uMicpO1xuICAgICAgYXdhaXQgZWwuY2xpY2soKTtcbiAgICAgIGF3YWl0IGVsLmNsaWNrKCk7XG4gICAgICBhd2FpdCBlbC5jbGljaygpO1xuICAgICAgKGF3YWl0IGVsLmdldEF0dHJpYnV0ZSgnY2xpY2tzJykpLnNob3VsZC5lcXVhbCgzKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGdldCB0aGUgbmFtZSBvZiBhbiBlbGVtZW50JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmVsZW1lbnRCeUNsYXNzTmFtZSgnTW9ja0lucHV0RmllbGQnKTtcbiAgICAgIChhd2FpdCBlbC5nZXRUYWdOYW1lKCkpLnNob3VsZC5lcXVhbCgnTW9ja0lucHV0RmllbGQnKTtcbiAgICAgIGVsID0gYXdhaXQgZHJpdmVyLmVsZW1lbnRCeUlkKCd3dicpO1xuICAgICAgKGF3YWl0IGVsLmdldFRhZ05hbWUoKSkuc2hvdWxkLmVxdWFsKCdNb2NrV2ViVmlldycpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgZGV0ZWN0IHdoZXRoZXIgYW4gZWxlbWVudCBpcyBkaXNwbGF5ZWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgZWwgPSBkcml2ZXIuZWxlbWVudEJ5SWQoJ0J1dHRvbjEnKTtcbiAgICAgIChhd2FpdCBlbC5pc0Rpc3BsYXllZCgpKS5zaG91bGQuZXF1YWwoZmFsc2UpO1xuICAgICAgZWwgPSBkcml2ZXIuZWxlbWVudEJ5SWQoJ0J1dHRvbjInKTtcbiAgICAgIChhd2FpdCBlbC5pc0Rpc3BsYXllZCgpKS5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBkZXRlY3Qgd2hldGhlciBhbiBlbGVtZW50IGlzIGVuYWJsZWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgZWwgPSBkcml2ZXIuZWxlbWVudEJ5SWQoJ0J1dHRvbjEnKTtcbiAgICAgIChhd2FpdCBlbC5pc0VuYWJsZWQoKSkuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICAgIGVsID0gZHJpdmVyLmVsZW1lbnRCeUlkKCdCdXR0b24yJyk7XG4gICAgICAoYXdhaXQgZWwuaXNFbmFibGVkKCkpLnNob3VsZC5lcXVhbCh0cnVlKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGRldGVjdCB3aGV0aGVyIGFuIGVsZW1lbnQgaXMgc2VsZWN0ZWQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgZWwgPSBkcml2ZXIuZWxlbWVudEJ5SWQoJ0J1dHRvbjEnKTtcbiAgICAgIChhd2FpdCBlbC5pc1NlbGVjdGVkKCkpLnNob3VsZC5lcXVhbChmYWxzZSk7XG4gICAgICBlbCA9IGRyaXZlci5lbGVtZW50QnlJZCgnQnV0dG9uMicpO1xuICAgICAgKGF3YWl0IGVsLmlzU2VsZWN0ZWQoKSkuc2hvdWxkLmVxdWFsKHRydWUpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgZ2V0IHRoZSBsb2NhdGlvbiBvbiBzY3JlZW4gb2YgYW4gZWxlbWVudCcsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBlbCA9IGRyaXZlci5lbGVtZW50QnlJZCgnbmF2Jyk7XG4gICAgICAoYXdhaXQgZWwuZ2V0TG9jYXRpb24oKSkuc2hvdWxkLmVxbCh7eDogMSwgeTogMX0pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgZ2V0IHRoZSBsb2NhdGlvbiBvbiBzY3JlZW4gb2YgYW4gZWxlbWVudCB3aXRoIGZsb2F0IHZhbHMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgZWwgPSBkcml2ZXIuZWxlbWVudEJ5SWQoJ2x2Jyk7XG4gICAgICAoYXdhaXQgZWwuZ2V0TG9jYXRpb24oKSkuc2hvdWxkLmVxbCh7eDogMjAuOCwgeTogMTUuM30pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgZ2V0IHRoZSBsb2NhdGlvbiBpbiB2aWV3IG9mIGFuIGVsZW1lbnQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgZWwgPSBkcml2ZXIuZWxlbWVudEJ5SWQoJ25hdicpO1xuICAgICAgKGF3YWl0IGVsLmdldExvY2F0aW9uSW5WaWV3KCkpLnNob3VsZC5lcWwoe3g6IDEsIHk6IDF9KTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGdldCB0aGUgbG9jYXRpb24gaW4gdmlldyBvZiBhbiBlbGVtZW50IHdpdGggZmxvYXQgdmFscycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBlbCA9IGRyaXZlci5lbGVtZW50QnlJZCgnbHYnKTtcbiAgICAgIChhd2FpdCBlbC5nZXRMb2NhdGlvbkluVmlldygpKS5zaG91bGQuZXFsKHt4OiAyMC44LCB5OiAxNS4zfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdldCB0aGUgc2l6ZSBvZiBhbiBlbGVtZW50JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmVsZW1lbnRCeUlkKCduYXYnKTtcbiAgICAgIChhd2FpdCBlbC5nZXRTaXplKCkpLnNob3VsZC5lcWwoe3dpZHRoOiAxMDAsIGhlaWdodDogMTAwfSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBnZXQgdGhlIHNpemUgb2YgYW4gZWxlbWVudCB3aXRoIGZsb2F0IHZhbHMnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgZWwgPSBhd2FpdCBkcml2ZXIuZWxlbWVudEJ5SWQoJ3d2Jyk7XG4gICAgICAoYXdhaXQgZWwuZ2V0U2l6ZSgpKS5zaG91bGQuZXFsKHt3aWR0aDogMjAuOCwgaGVpZ2h0OiAyMC41fSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBkZXRlcm1pbmUgZWxlbWVudCBlcXVhbGl0eScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBlbDEgPSBhd2FpdCBkcml2ZXIuZWxlbWVudEJ5SWQoJ3d2Jyk7XG4gICAgICBsZXQgZWwyID0gYXdhaXQgZHJpdmVyLmVsZW1lbnRCeUlkKCd3dicpO1xuICAgICAgKGF3YWl0IGVsMS5lcXVhbHMoZWwyKSkuc2hvdWxkLmVxdWFsKHRydWUpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgZGV0ZXJtaW5lIGVsZW1lbnQgaW5lcXVhbGl0eScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBlbDEgPSBhd2FpdCBkcml2ZXIuZWxlbWVudEJ5SWQoJ3d2Jyk7XG4gICAgICBsZXQgZWwyID0gYXdhaXQgZHJpdmVyLmVsZW1lbnRCeUlkKCdsdicpO1xuICAgICAgKGF3YWl0IGVsMS5lcXVhbHMoZWwyKSkuc2hvdWxkLmVxdWFsKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IGdldCB0aGUgY3NzIHByb3BlcnR5IG9mIGFuIGVsZW1lbnQgd2hlbiBub3QgaW4gYSB3ZWJ2aWV3JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgYXdhaXQgZHJpdmVyLmVsZW1lbnRCeUlkKCdCdXR0b24xJykuZ2V0Q29tcHV0ZWRDc3MoJ2hlaWdodCcpXG4gICAgICAgICAgICAgIC5zaG91bGQuZXZlbnR1YWxseS5iZS5yZWplY3RlZFdpdGgoLzM2Lyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBnZXQgdGhlIGNzcyBwcm9wZXJ0eSBvZiBhbiBlbGVtZW50IHdoZW4gaW4gYSB3ZWJ2aWV3JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgYXdhaXQgZHJpdmVyLmNvbnRleHQoJ1dFQlZJRVdfMScpO1xuICAgICAgbGV0IGVsID0gYXdhaXQgZHJpdmVyLmVsZW1lbnRCeVRhZ05hbWUoJ2JvZHknKTtcbiAgICAgIChhd2FpdCBlbC5nZXRDb21wdXRlZENzcygnYmFja2dyb3VuZC1jb2xvcicpKS5zaG91bGQuZXF1YWwoJyMwMDAnKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBudWxsIGZvciBhbiB1bnNwZWNpZmllZCBjc3MgcHJvcGVydHknLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgZWwgPSBhd2FpdCBkcml2ZXIuZWxlbWVudEJ5VGFnTmFtZSgnYm9keScpO1xuICAgICAgc2hvdWxkLmVxdWFsKGF3YWl0IGVsLmdldENvbXB1dGVkQ3NzKCdmb250LXNpemUnKSwgbnVsbCk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBlbGVtZW50VGVzdHM7XG4iXSwic291cmNlUm9vdCI6Ii4uLy4uIn0=
