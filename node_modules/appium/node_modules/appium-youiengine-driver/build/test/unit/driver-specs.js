'use strict';

var _regeneratorRuntime = require('babel-runtime/regenerator')['default'];

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _this = this;

var _chai = require('chai');

var _chai2 = _interopRequireDefault(_chai);

var _chaiAsPromised = require('chai-as-promised');

var _chaiAsPromised2 = _interopRequireDefault(_chaiAsPromised);

var _sinon = require('sinon');

var _sinon2 = _interopRequireDefault(_sinon);

var _ = require('../..');

var _2 = _interopRequireDefault(_);

var driver = undefined;
var sandbox = _sinon2['default'].sandbox.create();
var expect = _chai2['default'].expect;
_chai2['default'].should();
_chai2['default'].use(_chaiAsPromised2['default']);

describe('driver', function () {
  describe('constructor', function () {
    it('should call BaseDriver constructor with opts', function () {
      var driver = new _2['default']({ foo: 'bar' });
      driver.should.exist;
      driver.opts.foo.should.equal('bar');
    });
    it('should have this.findElOrEls', function () {
      var driver = new _2['default']({ foo: 'bar' });
      driver.findElOrEls.should.exist;
      driver.findElOrEls.should.be.a('function');
    });
  });
  describe('createSession', function () {
    beforeEach(function () {
      driver = new _2['default']();
      sandbox.stub(driver, 'connectSocket');
    });
    afterEach(function () {
      sandbox.restore();
    });
    it('should start an Android session if platformName is Android', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver, 'setupNewAndroidDriver');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.createSession({ automationName: 'YouiEngine', youiEngineAppAddress: '192.168.2.45', platformName: 'Android', deviceName: 'device', app: 'some.app.package' }));

          case 3:
            driver.setupNewAndroidDriver.calledOnce.should.be['true'];

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should start an iOS session if platformName is iOS', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            sandbox.stub(driver, 'setupNewIOSDriver');
            context$3$0.next = 3;
            return _regeneratorRuntime.awrap(driver.createSession({ automationName: 'YouiEngine', youiEngineAppAddress: '192.168.2.45', platformName: 'iOS', deviceName: 'device', app: 'some.app.package' }));

          case 3:
            driver.setupNewIOSDriver.calledOnce.should.be['true'];

          case 4:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this);
    });
    it('should delete a session on failure', function callee$2$0() {
      return _regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            // Force an error to make sure deleteSession gets called
            sandbox.stub(driver, 'startIOSSession').throws();
            sandbox.stub(driver, 'deleteSession');
            context$3$0.prev = 2;
            context$3$0.next = 5;
            return _regeneratorRuntime.awrap(driver.createSession({ automationName: 'YouiEngine', youiEngineAppAddress: '192.168.2.45', platformName: 'iOS', deviceName: 'device', app: 'some.app.package' }));

          case 5:
            context$3$0.next = 9;
            break;

          case 7:
            context$3$0.prev = 7;
            context$3$0.t0 = context$3$0['catch'](2);

          case 9:
            driver.deleteSession.calledOnce.should.be['true'];

          case 10:
          case 'end':
            return context$3$0.stop();
        }
      }, null, _this, [[2, 7]]);
    });
  });
  describe('validateDesiredCaps', function () {
    before(function () {
      driver = new _2['default']();
    });
    // List of scenarios to test:
    // 1) iOS simulator
    // 2) iOS real device
    // 3) Android emulator
    // 4) Android real device
    // 5) iOS simulator without proxy
    // 6) iOS real device without proxy
    // 7) Android emulator without proxy
    // 8) Android real device without proxy

    // Applies to all scenarios
    it('should throw an error if caps do not contain automationName', function () {
      expect(function () {
        driver.validateDesiredCaps({ platformName: 'Android', deviceName: 'device' });
      }).to['throw'](/can't be blank/);
    });
    it('should throw an error if caps do not contain platformName', function () {
      expect(function () {
        driver.validateDesiredCaps({ automationName: 'YouiEngine', deviceName: 'device' });
      }).to['throw'](/can't be blank/);
    });
    it('should throw an error if caps do not contain deviceName', function () {
      expect(function () {
        driver.validateDesiredCaps({ automationName: 'YouiEngine', platformName: 'Android' });
      }).to['throw'](/can't be blank/);
    });
    it('should not be sensitive to platform name casing', function () {
      expect(function () {
        driver.validateDesiredCaps({ automationName: 'YouiEngine', youiEngineAppAddress: 'localhost', platformName: 'AnDrOiD', deviceName: 'device', app: '/path/to/some.apk' });
      }).to.not['throw'](Error);
    });
    it('should not be sensitive to automationName name casing', function () {
      expect(function () {
        driver.validateDesiredCaps({ automationName: 'youIengIne', youiEngineAppAddress: 'localhost', platformName: 'Android', deviceName: 'device', app: '/path/to/some.apk' });
      }).to.not['throw'](Error);
    });

    // Applies to all scenarios with proxy
    it('should throw an error if caps contain "platformName != NoProxy" and do not contain youiEngineAppAddress', function () {
      expect(function () {
        driver.validateDesiredCaps({ automationName: 'YouiEngine', platformName: 'Android', deviceName: 'mydevice' });
      }).to['throw'](/must include/);
    });
    it('should throw an error if caps contain "platformName != NoProxy" and do not contain app', function () {
      expect(function () {
        driver.validateDesiredCaps({ automationName: 'YouiEngine', platformName: 'Android', deviceName: 'mydevice' });
      }).to['throw'](/must include/);
    });

    // Applies to all scenarios with no proxy
    it('should not throw an error if caps contain "platformName == NoProxy" and do not contain youiEngineAppAddress', function () {
      expect(function () {
        driver.validateDesiredCaps({ automationName: 'YouiEngine', platformName: 'NoProxy', deviceName: 'mydevice' });
      }).to.not['throw'](Error);
    });

    // 1) iOS simulator
    it('should not throw an error for minimum caps of iOS simulator', function () {
      expect(function () {
        driver.validateDesiredCaps({ automationName: 'YouiEngine', platformName: 'iOS', deviceName: 'iOS Simulator', youiEngineAppAddress: 'localhost', app: '/path/to/some.app' });
      }).to.not['throw'](Error);
    });

    // 2) iOS real device
    it('should not throw an error for minimum caps of iOS real device', function () {
      expect(function () {
        driver.validateDesiredCaps({ automationName: 'YouiEngine', platformName: 'iOS', deviceName: 'my device', youiEngineAppAddress: '192.168.1.72', app: '/path/to/some.app', udid: '09a24b51470b059f545d7a2fc996091e06675a61' });
      }).to.not['throw'](Error);
    });

    // 3) Android emulator
    it('should throw an error if caps contain "deviceName == Android" and do not contain avd', function () {
      expect(function () {
        driver.validateDesiredCaps({ automationName: 'YouiEngine', platformName: 'NoProxy', deviceName: 'Android' });
      }).to.not['throw'](/must include/);
    });
    /*it('should not throw an error for minimum caps of Android emulator', () => {
      expect(() => {
        driver.validateDesiredCaps({automationName: 'YouiEngine', platformName: 'Android', deviceName: 'Android', youiEngineAppAddress: 'localhost', app: '/path/to/some.app', avd: 'Nexus' });
      }).to.not.throw(Error);
    });*/

    // 4) Android real device
    it('should not throw an error for minimum caps of Android real device', function () {
      expect(function () {
        driver.validateDesiredCaps({ automationName: 'YouiEngine', platformName: 'Android', deviceName: '83B7N14B02224534', youiEngineAppAddress: '192.168.1.72', app: '/path/to/some.app', avd: 'Nexus' });
      }).to.not['throw'](Error);
    });

    // 5) iOS simulator without proxy
    it('should not throw an error for minimum caps of iOS simulator without proxy', function () {
      expect(function () {
        driver.validateDesiredCaps({ automationName: 'YouiEngine', platformName: 'NoProxy', deviceName: 'localhost' });
      }).to.not['throw'](Error);
    });

    // 6) iOS real device without proxy
    it('should not throw an error for minimum caps of iOS real device without proxy', function () {
      expect(function () {
        driver.validateDesiredCaps({ automationName: 'YouiEngine', platformName: 'NoProxy', deviceName: 'my device', youiEngineAppAddress: '192.168.1.72' });
      }).to.not['throw'](Error);
    });

    // 7) Android emulator without proxy
    // TBD

    // 8) Android real device without proxy
    it('should not throw an error for minimum caps of Android real device without proxy', function () {
      expect(function () {
        driver.validateDesiredCaps({ automationName: 'YouiEngine', platformName: 'NoProxy', deviceName: '83B7N14B02224534', youiEngineAppAddress: '192.168.1.72' });
      }).to.not['throw'](Error);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvdW5pdC9kcml2ZXItc3BlY3MuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7b0JBQWlCLE1BQU07Ozs7OEJBQ0ksa0JBQWtCOzs7O3FCQUMzQixPQUFPOzs7O2dCQUNJLE9BQU87Ozs7QUFFcEMsSUFBSSxNQUFNLFlBQUEsQ0FBQztBQUNYLElBQUksT0FBTyxHQUFHLG1CQUFNLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUNyQyxJQUFJLE1BQU0sR0FBRyxrQkFBSyxNQUFNLENBQUM7QUFDekIsa0JBQUssTUFBTSxFQUFFLENBQUM7QUFDZCxrQkFBSyxHQUFHLDZCQUFnQixDQUFDOztBQUV6QixRQUFRLENBQUMsUUFBUSxFQUFFLFlBQU07QUFDdkIsVUFBUSxDQUFDLGFBQWEsRUFBRSxZQUFNO0FBQzVCLE1BQUUsQ0FBQyw4Q0FBOEMsRUFBRSxZQUFNO0FBQ3ZELFVBQUksTUFBTSxHQUFHLGtCQUFxQixFQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUMsQ0FBQyxDQUFDO0FBQ2hELFlBQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO0FBQ3BCLFlBQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDckMsQ0FBQyxDQUFDO0FBQ0gsTUFBRSxDQUFDLDhCQUE4QixFQUFFLFlBQU07QUFDdkMsVUFBSSxNQUFNLEdBQUcsa0JBQXFCLEVBQUMsR0FBRyxFQUFFLEtBQUssRUFBQyxDQUFDLENBQUM7QUFDaEQsWUFBTSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO0FBQ2hDLFlBQU0sQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUM7S0FDNUMsQ0FBQyxDQUFDO0dBQ0osQ0FBQyxDQUFDO0FBQ0gsVUFBUSxDQUFDLGVBQWUsRUFBRSxZQUFNO0FBQzlCLGNBQVUsQ0FBQyxZQUFNO0FBQ2YsWUFBTSxH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RUFBQyxjQUFjLEVBQUUsWUFBWSxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxvQkFBb0IsRUFBRSxjQUFjLEVBQUUsQ0FBQyxDQUFDO09BQ3JKLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDeEIsQ0FBQyxDQUFDOzs7Ozs7QUFNSCxNQUFFLENBQUMsaUZBQWlGLEVBQUUsWUFBTTtBQUMxRixZQUFNLENBQUMsWUFBTTtBQUNYLGNBQU0sQ0FBQyxtQkFBbUIsQ0FBQyxFQUFDLGNBQWMsRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsa0JBQWtCLEVBQUUsb0JBQW9CLEVBQUUsY0FBYyxFQUFDLENBQUMsQ0FBQztPQUMzSixDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQ3hCLENBQUMsQ0FBQztHQUNKLENBQUMsQ0FBQztDQUNKLENBQUMsQ0FBQyIsImZpbGUiOiJ0ZXN0L3VuaXQvZHJpdmVyLXNwZWNzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNoYWkgZnJvbSAnY2hhaSc7XG5pbXBvcnQgY2hhaUFzUHJvbWlzZWQgZnJvbSAnY2hhaS1hcy1wcm9taXNlZCc7XG5pbXBvcnQgc2lub24gZnJvbSAnc2lub24nO1xuaW1wb3J0IFlvdWlFbmdpbmVEcml2ZXIgZnJvbSAnLi4vLi4nO1xuXG5sZXQgZHJpdmVyO1xubGV0IHNhbmRib3ggPSBzaW5vbi5zYW5kYm94LmNyZWF0ZSgpO1xubGV0IGV4cGVjdCA9IGNoYWkuZXhwZWN0O1xuY2hhaS5zaG91bGQoKTtcbmNoYWkudXNlKGNoYWlBc1Byb21pc2VkKTtcblxuZGVzY3JpYmUoJ2RyaXZlcicsICgpID0+IHtcbiAgZGVzY3JpYmUoJ2NvbnN0cnVjdG9yJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY2FsbCBCYXNlRHJpdmVyIGNvbnN0cnVjdG9yIHdpdGggb3B0cycsICgpID0+IHtcbiAgICAgIGxldCBkcml2ZXIgPSBuZXcgWW91aUVuZ2luZURyaXZlcih7Zm9vOiAnYmFyJ30pO1xuICAgICAgZHJpdmVyLnNob3VsZC5leGlzdDtcbiAgICAgIGRyaXZlci5vcHRzLmZvby5zaG91bGQuZXF1YWwoJ2JhcicpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgaGF2ZSB0aGlzLmZpbmRFbE9yRWxzJywgKCkgPT4ge1xuICAgICAgbGV0IGRyaXZlciA9IG5ldyBZb3VpRW5naW5lRHJpdmVyKHtmb286ICdiYXInfSk7XG4gICAgICBkcml2ZXIuZmluZEVsT3JFbHMuc2hvdWxkLmV4aXN0O1xuICAgICAgZHJpdmVyLmZpbmRFbE9yRWxzLnNob3VsZC5iZS5hKCdmdW5jdGlvbicpO1xuICAgIH0pO1xuICB9KTtcbiAgZGVzY3JpYmUoJ2NyZWF0ZVNlc3Npb24nLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBkcml2ZXIgPSBuZXcgWW91aUVuZ2luZURyaXZlcigpO1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlciwgJ2Nvbm5lY3RTb2NrZXQnKTtcbiAgICB9KTtcbiAgICBhZnRlckVhY2goKCkgPT4ge1xuICAgICAgc2FuZGJveC5yZXN0b3JlKCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBzdGFydCBhbiBBbmRyb2lkIHNlc3Npb24gaWYgcGxhdGZvcm1OYW1lIGlzIEFuZHJvaWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBzYW5kYm94LnN0dWIoZHJpdmVyLCAnc2V0dXBOZXdBbmRyb2lkRHJpdmVyJyk7XG4gICAgICBhd2FpdCBkcml2ZXIuY3JlYXRlU2Vzc2lvbih7YXV0b21hdGlvbk5hbWU6ICdZb3VpRW5naW5lJywgeW91aUVuZ2luZUFwcEFkZHJlc3M6ICcxOTIuMTY4LjIuNDUnLCBwbGF0Zm9ybU5hbWU6ICdBbmRyb2lkJywgZGV2aWNlTmFtZTogJ2RldmljZScsIGFwcDogJ3NvbWUuYXBwLnBhY2thZ2UnfSk7XG4gICAgICBkcml2ZXIuc2V0dXBOZXdBbmRyb2lkRHJpdmVyLmNhbGxlZE9uY2Uuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBzdGFydCBhbiBpT1Mgc2Vzc2lvbiBpZiBwbGF0Zm9ybU5hbWUgaXMgaU9TJywgYXN5bmMgKCkgPT4ge1xuICAgICAgc2FuZGJveC5zdHViKGRyaXZlciwgJ3NldHVwTmV3SU9TRHJpdmVyJyk7XG4gICAgICBhd2FpdCBkcml2ZXIuY3JlYXRlU2Vzc2lvbih7YXV0b21hdGlvbk5hbWU6ICdZb3VpRW5naW5lJywgeW91aUVuZ2luZUFwcEFkZHJlc3M6ICcxOTIuMTY4LjIuNDUnLCBwbGF0Zm9ybU5hbWU6ICdpT1MnLCBkZXZpY2VOYW1lOiAnZGV2aWNlJywgYXBwOiAnc29tZS5hcHAucGFja2FnZSd9KTtcbiAgICAgIGRyaXZlci5zZXR1cE5ld0lPU0RyaXZlci5jYWxsZWRPbmNlLnNob3VsZC5iZS50cnVlO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgZGVsZXRlIGEgc2Vzc2lvbiBvbiBmYWlsdXJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gRm9yY2UgYW4gZXJyb3IgdG8gbWFrZSBzdXJlIGRlbGV0ZVNlc3Npb24gZ2V0cyBjYWxsZWRcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIsICdzdGFydElPU1Nlc3Npb24nKS50aHJvd3MoKTtcbiAgICAgIHNhbmRib3guc3R1Yihkcml2ZXIsICdkZWxldGVTZXNzaW9uJyk7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBkcml2ZXIuY3JlYXRlU2Vzc2lvbih7YXV0b21hdGlvbk5hbWU6ICdZb3VpRW5naW5lJywgeW91aUVuZ2luZUFwcEFkZHJlc3M6ICcxOTIuMTY4LjIuNDUnLCBwbGF0Zm9ybU5hbWU6ICdpT1MnLCBkZXZpY2VOYW1lOiAnZGV2aWNlJywgYXBwOiAnc29tZS5hcHAucGFja2FnZSd9KTtcbiAgICAgIH0gY2F0Y2ggKGlnbikge31cbiAgICAgIGRyaXZlci5kZWxldGVTZXNzaW9uLmNhbGxlZE9uY2Uuc2hvdWxkLmJlLnRydWU7XG4gICAgfSk7XG4gIH0pO1xuICBkZXNjcmliZSgndmFsaWRhdGVEZXNpcmVkQ2FwcycsICgpID0+IHtcbiAgICBiZWZvcmUoKCkgPT4ge1xuICAgICAgZHJpdmVyID0gbmV3IFlvdWlFbmdpbmVEcml2ZXIoKTtcbiAgICB9KTtcbiAgICAvLyBMaXN0IG9mIHNjZW5hcmlvcyB0byB0ZXN0OlxuICAgIC8vIDEpIGlPUyBzaW11bGF0b3JcbiAgICAvLyAyKSBpT1MgcmVhbCBkZXZpY2VcbiAgICAvLyAzKSBBbmRyb2lkIGVtdWxhdG9yXG4gICAgLy8gNCkgQW5kcm9pZCByZWFsIGRldmljZVxuICAgIC8vIDUpIGlPUyBzaW11bGF0b3Igd2l0aG91dCBwcm94eVxuICAgIC8vIDYpIGlPUyByZWFsIGRldmljZSB3aXRob3V0IHByb3h5XG4gICAgLy8gNykgQW5kcm9pZCBlbXVsYXRvciB3aXRob3V0IHByb3h5XG4gICAgLy8gOCkgQW5kcm9pZCByZWFsIGRldmljZSB3aXRob3V0IHByb3h5XG5cbiAgICAvLyBBcHBsaWVzIHRvIGFsbCBzY2VuYXJpb3NcbiAgICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIGNhcHMgZG8gbm90IGNvbnRhaW4gYXV0b21hdGlvbk5hbWUnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBkcml2ZXIudmFsaWRhdGVEZXNpcmVkQ2Fwcyh7IHBsYXRmb3JtTmFtZTogJ0FuZHJvaWQnLCBkZXZpY2VOYW1lOiAnZGV2aWNlJ30pO1xuICAgICAgfSkudG8udGhyb3coL2Nhbid0IGJlIGJsYW5rLyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBhbiBlcnJvciBpZiBjYXBzIGRvIG5vdCBjb250YWluIHBsYXRmb3JtTmFtZScsICgpID0+IHtcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIGRyaXZlci52YWxpZGF0ZURlc2lyZWRDYXBzKHsgYXV0b21hdGlvbk5hbWU6ICdZb3VpRW5naW5lJywgZGV2aWNlTmFtZTogJ2RldmljZSd9KTtcbiAgICAgIH0pLnRvLnRocm93KC9jYW4ndCBiZSBibGFuay8pO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgdGhyb3cgYW4gZXJyb3IgaWYgY2FwcyBkbyBub3QgY29udGFpbiBkZXZpY2VOYW1lJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgZHJpdmVyLnZhbGlkYXRlRGVzaXJlZENhcHMoe2F1dG9tYXRpb25OYW1lOiAnWW91aUVuZ2luZScsIHBsYXRmb3JtTmFtZTogJ0FuZHJvaWQnfSk7XG4gICAgICB9KS50by50aHJvdygvY2FuJ3QgYmUgYmxhbmsvKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIG5vdCBiZSBzZW5zaXRpdmUgdG8gcGxhdGZvcm0gbmFtZSBjYXNpbmcnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBkcml2ZXIudmFsaWRhdGVEZXNpcmVkQ2Fwcyh7YXV0b21hdGlvbk5hbWU6ICdZb3VpRW5naW5lJywgeW91aUVuZ2luZUFwcEFkZHJlc3M6ICdsb2NhbGhvc3QnLCBwbGF0Zm9ybU5hbWU6ICdBbkRyT2lEJywgZGV2aWNlTmFtZTogJ2RldmljZScsIGFwcDogJy9wYXRoL3RvL3NvbWUuYXBrJ30pO1xuICAgICAgfSkudG8ubm90LnRocm93KEVycm9yKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIG5vdCBiZSBzZW5zaXRpdmUgdG8gYXV0b21hdGlvbk5hbWUgbmFtZSBjYXNpbmcnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBkcml2ZXIudmFsaWRhdGVEZXNpcmVkQ2Fwcyh7YXV0b21hdGlvbk5hbWU6ICd5b3VJZW5nSW5lJywgeW91aUVuZ2luZUFwcEFkZHJlc3M6ICdsb2NhbGhvc3QnLCBwbGF0Zm9ybU5hbWU6ICdBbmRyb2lkJywgZGV2aWNlTmFtZTogJ2RldmljZScsIGFwcDogJy9wYXRoL3RvL3NvbWUuYXBrJ30pO1xuICAgICAgfSkudG8ubm90LnRocm93KEVycm9yKTtcbiAgICB9KTtcblxuICAgIC8vIEFwcGxpZXMgdG8gYWxsIHNjZW5hcmlvcyB3aXRoIHByb3h5XG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBhbiBlcnJvciBpZiBjYXBzIGNvbnRhaW4gXCJwbGF0Zm9ybU5hbWUgIT0gTm9Qcm94eVwiIGFuZCBkbyBub3QgY29udGFpbiB5b3VpRW5naW5lQXBwQWRkcmVzcycsICgpID0+IHtcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIGRyaXZlci52YWxpZGF0ZURlc2lyZWRDYXBzKHthdXRvbWF0aW9uTmFtZTogJ1lvdWlFbmdpbmUnLCBwbGF0Zm9ybU5hbWU6ICdBbmRyb2lkJywgZGV2aWNlTmFtZTogJ215ZGV2aWNlJyB9KTtcbiAgICAgIH0pLnRvLnRocm93KC9tdXN0IGluY2x1ZGUvKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIGNhcHMgY29udGFpbiBcInBsYXRmb3JtTmFtZSAhPSBOb1Byb3h5XCIgYW5kIGRvIG5vdCBjb250YWluIGFwcCcsICgpID0+IHtcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIGRyaXZlci52YWxpZGF0ZURlc2lyZWRDYXBzKHthdXRvbWF0aW9uTmFtZTogJ1lvdWlFbmdpbmUnLCBwbGF0Zm9ybU5hbWU6ICdBbmRyb2lkJywgZGV2aWNlTmFtZTogJ215ZGV2aWNlJyB9KTtcbiAgICAgIH0pLnRvLnRocm93KC9tdXN0IGluY2x1ZGUvKTtcbiAgICB9KTtcblxuICAgIC8vIEFwcGxpZXMgdG8gYWxsIHNjZW5hcmlvcyB3aXRoIG5vIHByb3h5XG4gICAgaXQoJ3Nob3VsZCBub3QgdGhyb3cgYW4gZXJyb3IgaWYgY2FwcyBjb250YWluIFwicGxhdGZvcm1OYW1lID09IE5vUHJveHlcIiBhbmQgZG8gbm90IGNvbnRhaW4geW91aUVuZ2luZUFwcEFkZHJlc3MnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBkcml2ZXIudmFsaWRhdGVEZXNpcmVkQ2Fwcyh7YXV0b21hdGlvbk5hbWU6ICdZb3VpRW5naW5lJywgcGxhdGZvcm1OYW1lOiAnTm9Qcm94eScsIGRldmljZU5hbWU6ICdteWRldmljZScgfSk7XG4gICAgICB9KS50by5ub3QudGhyb3coRXJyb3IpO1xuICAgIH0pO1xuXG4gICAgLy8gMSkgaU9TIHNpbXVsYXRvclxuICAgIGl0KCdzaG91bGQgbm90IHRocm93IGFuIGVycm9yIGZvciBtaW5pbXVtIGNhcHMgb2YgaU9TIHNpbXVsYXRvcicsICgpID0+IHtcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIGRyaXZlci52YWxpZGF0ZURlc2lyZWRDYXBzKHthdXRvbWF0aW9uTmFtZTogJ1lvdWlFbmdpbmUnLCBwbGF0Zm9ybU5hbWU6ICdpT1MnLCBkZXZpY2VOYW1lOiAnaU9TIFNpbXVsYXRvcicsIHlvdWlFbmdpbmVBcHBBZGRyZXNzOiAnbG9jYWxob3N0JywgYXBwOiAnL3BhdGgvdG8vc29tZS5hcHAnIH0pO1xuICAgICAgfSkudG8ubm90LnRocm93KEVycm9yKTtcbiAgICB9KTtcblxuICAgIC8vIDIpIGlPUyByZWFsIGRldmljZVxuICAgIGl0KCdzaG91bGQgbm90IHRocm93IGFuIGVycm9yIGZvciBtaW5pbXVtIGNhcHMgb2YgaU9TIHJlYWwgZGV2aWNlJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgZHJpdmVyLnZhbGlkYXRlRGVzaXJlZENhcHMoe2F1dG9tYXRpb25OYW1lOiAnWW91aUVuZ2luZScsIHBsYXRmb3JtTmFtZTogJ2lPUycsIGRldmljZU5hbWU6ICdteSBkZXZpY2UnLCB5b3VpRW5naW5lQXBwQWRkcmVzczogJzE5Mi4xNjguMS43MicsIGFwcDogJy9wYXRoL3RvL3NvbWUuYXBwJywgdWRpZDogJzA5YTI0YjUxNDcwYjA1OWY1NDVkN2EyZmM5OTYwOTFlMDY2NzVhNjEnIH0pO1xuICAgICAgfSkudG8ubm90LnRocm93KEVycm9yKTtcbiAgICB9KTtcblxuICAgIC8vIDMpIEFuZHJvaWQgZW11bGF0b3JcbiAgICBpdCgnc2hvdWxkIHRocm93IGFuIGVycm9yIGlmIGNhcHMgY29udGFpbiBcImRldmljZU5hbWUgPT0gQW5kcm9pZFwiIGFuZCBkbyBub3QgY29udGFpbiBhdmQnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBkcml2ZXIudmFsaWRhdGVEZXNpcmVkQ2Fwcyh7YXV0b21hdGlvbk5hbWU6ICdZb3VpRW5naW5lJywgcGxhdGZvcm1OYW1lOiAnTm9Qcm94eScsIGRldmljZU5hbWU6ICdBbmRyb2lkJyB9KTtcbiAgICAgIH0pLnRvLm5vdC50aHJvdygvbXVzdCBpbmNsdWRlLyk7XG4gICAgfSk7XG4gICAgLyppdCgnc2hvdWxkIG5vdCB0aHJvdyBhbiBlcnJvciBmb3IgbWluaW11bSBjYXBzIG9mIEFuZHJvaWQgZW11bGF0b3InLCAoKSA9PiB7XG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBkcml2ZXIudmFsaWRhdGVEZXNpcmVkQ2Fwcyh7YXV0b21hdGlvbk5hbWU6ICdZb3VpRW5naW5lJywgcGxhdGZvcm1OYW1lOiAnQW5kcm9pZCcsIGRldmljZU5hbWU6ICdBbmRyb2lkJywgeW91aUVuZ2luZUFwcEFkZHJlc3M6ICdsb2NhbGhvc3QnLCBhcHA6ICcvcGF0aC90by9zb21lLmFwcCcsIGF2ZDogJ05leHVzJyB9KTtcbiAgICAgIH0pLnRvLm5vdC50aHJvdyhFcnJvcik7XG4gICAgfSk7Ki9cblxuICAgIC8vIDQpIEFuZHJvaWQgcmVhbCBkZXZpY2VcbiAgICBpdCgnc2hvdWxkIG5vdCB0aHJvdyBhbiBlcnJvciBmb3IgbWluaW11bSBjYXBzIG9mIEFuZHJvaWQgcmVhbCBkZXZpY2UnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBkcml2ZXIudmFsaWRhdGVEZXNpcmVkQ2Fwcyh7YXV0b21hdGlvbk5hbWU6ICdZb3VpRW5naW5lJywgcGxhdGZvcm1OYW1lOiAnQW5kcm9pZCcsIGRldmljZU5hbWU6ICc4M0I3TjE0QjAyMjI0NTM0JywgeW91aUVuZ2luZUFwcEFkZHJlc3M6ICcxOTIuMTY4LjEuNzInLCBhcHA6ICcvcGF0aC90by9zb21lLmFwcCcsIGF2ZDogJ05leHVzJyB9KTtcbiAgICAgIH0pLnRvLm5vdC50aHJvdyhFcnJvcik7XG4gICAgfSk7XG5cbiAgICAvLyA1KSBpT1Mgc2ltdWxhdG9yIHdpdGhvdXQgcHJveHlcbiAgICBpdCgnc2hvdWxkIG5vdCB0aHJvdyBhbiBlcnJvciBmb3IgbWluaW11bSBjYXBzIG9mIGlPUyBzaW11bGF0b3Igd2l0aG91dCBwcm94eScsICgpID0+IHtcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIGRyaXZlci52YWxpZGF0ZURlc2lyZWRDYXBzKHthdXRvbWF0aW9uTmFtZTogJ1lvdWlFbmdpbmUnLCBwbGF0Zm9ybU5hbWU6ICdOb1Byb3h5JywgZGV2aWNlTmFtZTogJ2xvY2FsaG9zdCcgfSk7XG4gICAgICB9KS50by5ub3QudGhyb3coRXJyb3IpO1xuICAgIH0pO1xuXG4gICAgLy8gNikgaU9TIHJlYWwgZGV2aWNlIHdpdGhvdXQgcHJveHlcbiAgICBpdCgnc2hvdWxkIG5vdCB0aHJvdyBhbiBlcnJvciBmb3IgbWluaW11bSBjYXBzIG9mIGlPUyByZWFsIGRldmljZSB3aXRob3V0IHByb3h5JywgKCkgPT4ge1xuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgZHJpdmVyLnZhbGlkYXRlRGVzaXJlZENhcHMoe2F1dG9tYXRpb25OYW1lOiAnWW91aUVuZ2luZScsIHBsYXRmb3JtTmFtZTogJ05vUHJveHknLCBkZXZpY2VOYW1lOiAnbXkgZGV2aWNlJywgeW91aUVuZ2luZUFwcEFkZHJlc3M6ICcxOTIuMTY4LjEuNzInIH0pO1xuICAgICAgfSkudG8ubm90LnRocm93KEVycm9yKTtcbiAgICB9KTtcblxuICAgIC8vIDcpIEFuZHJvaWQgZW11bGF0b3Igd2l0aG91dCBwcm94eVxuICAgIC8vIFRCRFxuXG4gICAgLy8gOCkgQW5kcm9pZCByZWFsIGRldmljZSB3aXRob3V0IHByb3h5XG4gICAgaXQoJ3Nob3VsZCBub3QgdGhyb3cgYW4gZXJyb3IgZm9yIG1pbmltdW0gY2FwcyBvZiBBbmRyb2lkIHJlYWwgZGV2aWNlIHdpdGhvdXQgcHJveHknLCAoKSA9PiB7XG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBkcml2ZXIudmFsaWRhdGVEZXNpcmVkQ2Fwcyh7YXV0b21hdGlvbk5hbWU6ICdZb3VpRW5naW5lJywgcGxhdGZvcm1OYW1lOiAnTm9Qcm94eScsIGRldmljZU5hbWU6ICc4M0I3TjE0QjAyMjI0NTM0JywgeW91aUVuZ2luZUFwcEFkZHJlc3M6ICcxOTIuMTY4LjEuNzInfSk7XG4gICAgICB9KS50by5ub3QudGhyb3coRXJyb3IpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIuLi8uLi8uLiJ9
